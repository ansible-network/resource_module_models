---
GENERATOR_VERSION: '1.0'
ANSIBLE_METADATA: |
    {
      'metadata_version': '1.1',
      'status': ['preview'],
      'supported_by': 'community',
      'license': 'Apache 2.0'
    }
NETWORK_OS: sonic
RESOURCE: vlan_mapping
COPYRIGHT: "Â© Copyright 2023 Dell Inc. or its subsidiaries. All Rights Reserved"
LICENSE: gpl-3.0.txt
DOCUMENTATION: |
  module: sonic_vlan_mapping
  version_added: "2.2.0"
  author: "M. Zhang (@mingjunzhang2019)"
  short_description: Configure vlan mappings on SONiC.
  description:
    - This module provides configuration management for vlan mappings on devices running SONiC.
    - Vlan mappings only available on TD3 and TD4 devices.
    - For TD4 devices must enable vlan mapping first (can enable in config-switch-resource).
  options:
    config:
      description:
        - Specifies the vlan mapping related configurations.
      type: list
      elements: dict
      suboptions:
        name:
          description:
            - Full name of the interface, i.e. Ethernet8, PortChannel2, Eth1/2.
          required: true
          type: str
        mapping:
          description:
            - Define vlan mappings.
          type: list
          elements: dict
          mutually_exclusive: [[dot1q_tunnel, vlan_translation]]
          suboptions:
            service_vlan:
              description:
                - Configure service provider VLAN ID.
                - VLAN ID range is 1-4094.
              required: true
              type: int
            dot1q_tunnel:
              description:
                - Specify a vlan stacking.
              type: dict
            suboptions:
                vlan_ids:
                  description:
                    - Configure customer VLAN IDs.
                    - It can pass ranges and/or multiple list entries.
                    - Individual VLAN ID or (-) separated range of VLAN IDs.
                  type: list
                  elements: str
                priority:
                  description:
                    - Set priority level of the vlan stacking.
                    - Priority range is 0-7.
                  type: int
            vlan_translation:
              description:
                - Specify a vlan translation.
              type: dict
              suboptions:
                multi_tag:
                  description:
                    - Indicate if it is a multiple tags.
                  type: bool
                match_single_tags:
                  description:
                    - Configure single tagged vlan translation.
                  type: list
                  elements: dict
                  suboptions:
                    outer_vlan:
                      description:
                        - Configure outer customer VLAN ID.
                        - VLAN IDs range is 1-4094.
                      required: true
                      type: int
                    priority:
                      description:
                        - Set priority level of the vlan translation.
                        - Priority range is 0-7.
                      type: int
                match_double_tags:
                  description:
                    - Configure double tagged vlan translation.
                  type: list
                  elements: dict
                  suboptions:
                    inner_vlan:
                      description:
                        - Configure inner customer VLAN ID.
                        - VLAN IDs range is 1-4094.
                        - Only available for double tagged translations.
                      required: true
                      type: int
                    outer_vlan:
                      description:
                        - Configure outer customer VLAN ID.
                        - VLAN IDs range is 1-4094.
                      required: true
                      type: int
                    priority:
                      description:
                        - Set priority level of the vlan translation.
                        - Priority range is 0-7.
                      type: int
    state:
      description:
        - Specifies the operation to be performed on the vlan mappings configured on the device.
        - In case of merged, the input configuration will be merged with the existing vlan mappings on the device.
        - In case of deleted, the existing vlan mapping configuration will be removed from the device.
        - In case of overridden, all existing vlan mappings will be deleted and the specified input configuration will be add.
        - In case of replaced, the existing vlan mappings on the device will be replaced by the configuration for
        - each vlan mapping.
      type: str
      choices:
        - merged
        - deleted
        - replaced
        - overridden
      default: merged

EXAMPLES:
  - deleted_example_01.txt
  - deleted_example_02.txt
  - merged_example_01.txt
  - merged_example_02.txt
  - replaced_example_01.txt
  - overridden_example_01.txt
