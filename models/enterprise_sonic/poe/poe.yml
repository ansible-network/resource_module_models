GENERATOR_VERSION: '1.0'
NETWORK_OS: sonic
RESOURCE: poe
ANSIBLE_METADATA: |
    {
        'metadata_version': '1.1',
        'status': ['preview'],
        'supported_by': 'community'
    }
COPYRIGHT: Copyright 2023 Dell Inc. or its subsidiaries. All Rights Reserved
DOCUMENTATION: |
    module: sonic_poe
    version_added: "2.3.0"
    short_description: Manage PoE configuration on SONiC
    description:
      - This module provides configuration management of PoE at global and card level for devices running SONiC
    author: "Shade Talabi (@stalabi1), Xiao Han (@Xiao_Han2)"
    options:
      config:
        description:
          - Specifies PoE configurations
        type: dict
        suboptions:
          global:
            description: PoE global configuration
            type: dict
            suboptions:
              power_mgmt_model:
                description: |
                  the power management algorithm. dynamic means that power consumption of each port
                  is measured and calculated in real-time. static means that power allocated for each port depends
                  on the type of power threshold configured on the port
                type: str
                choices: ['dynamic', 'dynamic-priority', 'static', 'static-priority', 'class']
              usage_threshold:
                description: Inline Power Usage Threshold
                type: int
              auto_reset:
                description: Enable or disable PoE Auto Reset Mode
                type: bool
          cards:
            description: PoE configuration for the all the cards
            type: list
            elements: dict
            suboptions:
              card_id:
                description:
                  - Name of interface
                type: int
                required: True
              power_mgmt_model:
                description: |
                  the power management algorithm. dynamic means that power consumption of each port
                  is measured and calculated in real-time. static means that power allocated for each port depends
                  on the type of power threshold configured on the port
                type: str
                choices: ['dynamic', 'dynamic-priority', 'static', 'static-priority', 'class']
              usage_threshold:
                description: Inline power usage threshold value
                type: int
              auto_reset:
                description: Enable or disable PoE Auto Reset Mode
                type: bool
          interfaces:
            description: configuration for poe on individual interfaces
            type: list
            elements: dict
            suboptions:
              name:
                description: Reference to the interface
                type: str
                required: True
              enabled:
                description: enable PoE per port
                type: str
              priority:
                description: PoE port priority
                type: str
                choices: ['low', 'medium', 'high', 'critical']
              detection:
                description: PoE detection mode for port
                type: str
                choices: ['2pt-dot3af', '2pt-dot3af+legacy', '4pt-dot3af', '4pt-dot3af+legacy', 'dot3bt', 'dot3bt+legacy', 'legacy']
              power_up_mode:
                description: PoE Port power up mode
                type: str
                choices: ['dot3af', 'dot3at', 'dot3bt', 'dot3bt-type3', 'dot3bt-type4', 'high-inrush', 'pre-dot3at', 'pre-dot3bt']
              power_pairs:
                description:
                  - PoE port power-pairs settings
                type: str
                choices: ['signal', 'spare', 'invalid']
              power_limit_type:
                description:
                  - what type of limit is set for maximum power port can provide
                type: str
                choices: ['none', 'class-based', 'user', 'invalid']
              power_limit:
                description:
                  - Maximum power the port can provide to an attached device measured in milliwatts
                  - Range 0-99900
                type: int
              high_power:
                description:
                  - Enables high power mode on a PSE port
                type: bool
              disconnect_type:
                description: PoE port disconnect type settings
                type: str
                choices: ['none', 'ac', 'dc']
              four_pair:
                description:
                  - Enables four pair mode for port
                type: bool
              use_spare_pair:
                description:
                  - Enables spare pair power for port
                type: bool
              power_classification:
                description: PoE power-classification mode for port
                type: str
                choices: ['normal', 'bypass', 'invalid']
      state:
        description:
          - The state of the configuration after module completion
        type: str
        choices: ['merged', 'deleted', 'replaced', 'overridden']
        default: merged
EXAMPLES: []