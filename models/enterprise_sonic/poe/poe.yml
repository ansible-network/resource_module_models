GENERATOR_VERSION: '1.0'
NETWORK_OS: sonic
RESOURCE: poe
ANSIBLE_METADATA: |
    {
        'metadata_version': '1.1',
        'status': ['preview'],
        'supported_by': 'community'
    }
COPYRIGHT: Copyright 2023 Dell Inc. or its subsidiaries. All Rights Reserved
DOCUMENTATION: |
    module: sonic_poe
    version_added: "2.3.0"
    short_description: Manage PoE configuration on SONiC
    description:
      - This module provides configuration management of PoE at global and card level for devices running SONiC
    author: "Shade Talabi (@stalabi1), Xiao Han (@Xiao_Han2)"
    options:
      config:
        description:
          - Specifies PoE configurations
        type: dict
        suboptions:
          global:
            description: PoE global configuration
            type: dict
            suboptions:
              power_mgmt_model:
                description: |
                  the power management algorithm. dynamic means that power consumption of each port
                  is measured and calculated in real-time. static means that power allocated for each port depends
                  on the type of power threshold configured on the port
                type: str
                choices: ['dynamic', 'dynamic-priority', 'static', 'static-priority', 'class']
              usage_threshold:
                description: Inline Power Usage Threshold
                type: int
              auto_reset:
                description: Enable or disable PoE Auto Reset Mode
                type: bool
          cards:
            description: PoE card configuration (power controller hardware)
            type: list
            elements: dict
            suboptions:
              card_id:
                description:
                  - Identifier for the card
                type: int
                required: True
              power_mgmt_model:
                description: |
                  the power management algorithm. dynamic means that power consumption of each port
                  is measured and calculated in real-time. static means that power allocated for each port depends
                  on the type of power threshold configured on the port
                type: str
                choices: ['dynamic', 'dynamic-priority', 'static', 'static-priority', 'class']
              usage_threshold:
                description: Inline power usage threshold value
                type: int
              auto_reset:
                description: Enable or disable PoE Auto Reset Mode
                type: bool
          interfaces:
            description: PoE ethernet interface configuration
            type: list
            elements: dict
            suboptions:
              name:
                description: name of the interface
                type: str
                required: True
              enabled:
                description: enable PoE per port
                type: str
              priority:
                description:
                  - PoE port priority in power management algorithm. 
                  - Priority could be used by a control mechanism
                    that prevents over current situations by disconnecting first
                    ports with lower power priority.
                  - Ports that connect devices
                    critical to the operation of the network - like the E911
                    telephones ports - should be set to higher priority.
                type: str
                choices: ['invalid', 'low', 'medium', 'high', 'critical']
              detection:
                description: 
                  - Device detection mechanism performed by this PSE port.
                  - Legacy is capacitive detection scheme, which can be used alone or as a backup if other detection schemes fail.
                  - Those schemes are IEEE 802 standard schemes.
                  - None cannot be forcibly set by adminstrator.
                type: str
                choices: ['None', '2pt-dot3af', '2pt-dot3af+legacy', '4pt-dot3af', '4pt-dot3af+legacy', 'dot3bt', 'dot3bt+legacy', 'legacy']
              power_up_mode:
                description: 
                  - The mode configured for a PSE port to deliver high power.
                  - 'pre-dot3at' means that a port is powered in the IEEE 802.3af mode initially, switched to the high-power IEEE 802.3at mode
                  - 'dot3at' means that a port is powered in the IEEE 802.3at mode.
                  - 'dot3bt', type3 and 'pre-dot3bt' are to support 802.3bt interfaces.
                type: str
                choices: ['invalid', 'dot3af', 'dot3at', 'dot3bt', 'dot3bt-type3', 'dot3bt-type4', 'high-inrush', 'pre-dot3at', 'pre-dot3bt']
              power_pairs:
                description:
                  - Controls the pairs in use.
                type: str
                choices: ['signal', 'spare', 'invalid']
              power_limit_type:
                description:
                  - Controls the maximum power that a port can deliver.
                  - Class based means means that the port power limit is as per the dot3af class of the PD attached.
                  - User means specified by config
                type: str
                choices: ['none', 'class-based', 'user', 'invalid']
              power_limit:
                description:
                  - The configured maximum power this port can provide to an attached device measured in Milliwatts.
                  - Range 0-99900
                type: int
              high_power:
                description:
                  - Enables high power mode on a PSE port
                type: bool
              disconnect_type:
                description: Port disconnect type
                type: str
                choices: ['none', 'ac', 'dc']
              four_pair:
                description:
                  - Enables four pair mode for port
                type: bool
              use_spare_pair:
                description:
                  - Enables spare pair power for port
                type: bool
              power_classification:
                description: PoE power-classification type for port
                type: str
                choices: ['normal', 'bypass', 'invalid']
      state:
        description:
          - The state of the configuration after module completion
        type: str
        choices: ['merged', 'deleted', 'replaced', 'overridden']
        default: merged
EXAMPLES: []